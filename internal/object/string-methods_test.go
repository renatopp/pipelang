package object_test

import (
	"testing"

	"github.com/renatopp/pipelang/test/common"
)

func TestString_Index(t *testing.T) {
	common.AssertCode(t, `'renato'[0]`, `r`)
	common.AssertCode(t, `'renato'[-1]`, `o`)
	common.AssertCode(t, `'renato'[0, 5]`, `renat`)
	common.AssertCode(t, `'renato'[3, 5]`, `at`)
	common.AssertCode(t, `'√°√ß√£·∫ûü•∏'[1, 3]`, `√ß√£`)
	common.AssertCode(t, `'renato'[4, 10]`, `to`)
	common.AssertCode(t, `'renato'[-2, 10]`, `to`)
	common.AssertCode(t, `'renato'[-100, 0]`, ``)
	common.AssertCodeError(t, `'renato'[6]`)
	common.AssertCodeError(t, `'renato'[-7]`)
	common.AssertCodeError(t, `'renato'[-7, 30, 20]`)
}

func TestString_Size(t *testing.T) {
	common.AssertCode(t, `'renato'.Size()`, `6`)
	common.AssertCode(t, `''.Size()`, `0`)
	common.AssertCode(t, `'√ß√£√≠ü•∏'.Size()`, `4`)
}

func TestString_Get(t *testing.T) {
	common.AssertCode(t, `'√°√ß√£·∫ûü•∏'.Get(3)`, `·∫û`)
	common.AssertCode(t, `'renato'.Get(0)`, `r`)
	common.AssertCode(t, `'renato'.Get(-1)`, `o`)
	common.AssertCodeError(t, `'renato'.Get()`)
	common.AssertCodeError(t, `'renato'.Get(6)`)
	common.AssertCodeError(t, `'renato'.Get(-7)`)
	common.AssertCodeError(t, `'renato'.Get('a')`)
}

func TestString_GetOr(t *testing.T) {
	common.AssertCode(t, `'√°√ß√£·∫ûü•∏'.GetOr(2, 'a')`, `√£`)
	common.AssertCode(t, `'renato'.GetOr(0, 'a')`, `r`)
	common.AssertCode(t, `'renato'.GetOr(100, 'a')`, `a`)
	common.AssertCodeError(t, `'renato'.GetOr(0)`)
	common.AssertCodeError(t, `'renato'.GetOr(0, 3)`)
	common.AssertCodeError(t, `'renato'.GetOr('a', 'a')`)
}

func TestString_Sub(t *testing.T) {
	common.AssertCode(t, `'√°√ß√£·∫ûü•∏'.Sub(3, 10)`, `·∫ûü•∏`)
	common.AssertCode(t, `'renato'.Sub(0, 5)`, `renat`)
	common.AssertCode(t, `'renato'.Sub(3, 5)`, `at`)
	common.AssertCode(t, `'renato'.Sub(4, 10)`, `to`)
	common.AssertCode(t, `'renato'.Sub(-2, 10)`, `to`)
	common.AssertCode(t, `'renato'.Sub(-100, 0)`, ``)
	common.AssertCodeError(t, `'renato'.Sub(-1000)`)
	common.AssertCodeError(t, `'renato'.Sub('a')`)
}

func TestString_Cut(t *testing.T) {
	common.AssertCode(t, `'√°√ß√£·∫ûü•∏'.Cut(3)`, `('√°√ß√£', '·∫ûü•∏')`)
	common.AssertCode(t, `'renato'.Cut(1)`, `('r', 'enato')`)
	common.AssertCode(t, `'renato'.Cut(2)`, `('re', 'nato')`)
	common.AssertCode(t, `'renato'.Cut(-1)`, `('renat', 'o')`)
	common.AssertCode(t, `'renato'.Cut(-100)`, `('', 'renato')`)
	common.AssertCode(t, `'renato'.Cut(100)`, `('renato', '')`)
}

func TestString_CutFn(t *testing.T) {
	common.AssertCode(t, `'√°√ß√£·∫ûü•∏'.CutFn(chr: chr == '·∫û')`, `('√°√ß√£', '·∫ûü•∏')`)
	common.AssertCode(t, `'renato'.CutFn(chr: chr == 'a')`, `('ren', 'ato')`)
	common.AssertCode(t, `'renato'.CutFn((_, idx): idx >= 3)`, `('ren', 'ato')`)
}

func TestString_Find(t *testing.T) {
	common.AssertCode(t, `'√°√ß√£·∫ûü•∏'.Find('ü•∏')`, `4`)
	common.AssertCode(t, `'renato nato'.Find('a')`, `3`)
	common.AssertCode(t, `'renato nato'.Find('an')`, `-1`)
	common.AssertCode(t, `'renato nato'.Find('na')`, `2`)
}

func TestString_FindAny(t *testing.T) {
	common.AssertCode(t, `'√°√ß√£·∫ûü•∏'.FindAny('c√£2')`, `2`)
	common.AssertCode(t, `'renato nato'.FindAny('a')`, `3`)
	common.AssertCode(t, `'renato nato'.FindAny('an')`, `2`)
	common.AssertCode(t, `'renato nato'.FindAny('na')`, `2`)
}

func TestString_FindFn(t *testing.T) {
	common.AssertCode(t, `'√°√ß√£·∫ûü•∏'.FindFn(chr: chr == '√£')`, `2`)
	common.AssertCode(t, `'renato nato'.FindFn(chr: chr == 'a')`, `3`)
}

func TestString_FindLast(t *testing.T) {
	common.AssertCode(t, `'√°√ß√£·∫ûü•∏'.FindLast('·∫û')`, `3`)
	common.AssertCode(t, `'renato nato'.FindLast('a')`, `8`)
	common.AssertCode(t, `'renato nato'.FindLast('an')`, `-1`)
	common.AssertCode(t, `'renato nato'.FindLast('na')`, `7`)
}

func TestString_FindLastAny(t *testing.T) {
	common.AssertCode(t, `'√°√ß√£·∫ûü•∏'.FindLastAny('f·∫ûa')`, `3`)
	common.AssertCode(t, `'renato nato'.FindLastAny('a')`, `8`)
	common.AssertCode(t, `'renato nato'.FindLastAny('an')`, `8`)
	common.AssertCode(t, `'renato nato'.FindLastAny('na')`, `8`)
}

func TestString_FindLastFn(t *testing.T) {
	common.AssertCode(t, `'√°√ß√£·∫ûü•∏'.FindLastFn(chr: chr == '·∫û')`, `3`)
	common.AssertCode(t, `'renato nato'.FindLastFn(chr: chr == 'a')`, `8`)
}

func TestString_Join(t *testing.T) {
	common.AssertCode(t, `'üéÅ'.Join([1, 2, 3])`, `1üéÅ2üéÅ3`)
	common.AssertCode(t, `', '.Join([])`, ``)
	common.AssertCode(t, `', '.Join([2])`, `2`)
	common.AssertCode(t, `', '.Join([1, 2, 'c'])`, `1, 2, c`)
	common.AssertCode(t, `'; '.Join([1, 2, 'c'])`, `1; 2; c`)
	common.AssertCode(t, `'| '.Join([1, 2, 'c'])`, `1| 2| c`)
	common.AssertCode(t, `','.Join([1, 2, 'c'])`, `1,2,c`)
	common.AssertCodeError(t, `', '.Join("a")`)
}

func TestString_JoinArgs(t *testing.T) {
	common.AssertCode(t, `'üéÅ'.JoinArgs(1, 2, 3)`, `1üéÅ2üéÅ3`)
	common.AssertCode(t, `', '.JoinArgs(1, 2, 'c')`, `1, 2, c`)
	common.AssertCode(t, `'; '.JoinArgs(1, 2, 'c')`, `1; 2; c`)
	common.AssertCode(t, `'| '.JoinArgs(1, 2, 'c')`, `1| 2| c`)
	common.AssertCode(t, `','.JoinArgs(1, 2, 'c')`, `1,2,c`)
	common.AssertCode(t, `','.JoinArgs('c')`, `c`)
}

func TestString_Split(t *testing.T) {
	common.AssertCode(t, `'1üéÅ2üéÅ3'.Split('üéÅ')`, `['1', '2', '3']`)
	common.AssertCode(t, `'hello,world'.Split(',')`, `['hello', 'world']`)
	common.AssertCode(t, `'hellopingworld'.Split('ping')`, `['hello', 'world']`)
	common.AssertCode(t, `'abcdefg'.Split('')`, `['a', 'b', 'c', 'd', 'e', 'f', 'g']`)
	common.AssertCode(t, `'.1.1.'.Split('.')`, `['', '1', '1', '']`)
	common.AssertCode(t, `''.Split('')`, `[]`)
	common.AssertCodeError(t, `''.Split(3)`)
}

func TestString_SplitAt(t *testing.T) {
	common.AssertCode(t, `'1üéÅ2üéÅ3'.SplitAt(2)`, `['1üéÅ', '2üéÅ3']`)
	common.AssertCode(t, `'hello,world'.SplitAt(6)`, `['hello,', 'world']`)
	common.AssertCode(t, `'hello,world'.SplitAt(100)`, `['hello,world', '']`)
	common.AssertCode(t, `'hello,world'.SplitAt(-2)`, `['hello,wor', 'ld']`)
	common.AssertCode(t, `''.SplitAt(2)`, `['', '']`)
}

func TestString_SplitFn(t *testing.T) {
	common.AssertCode(t, `'1üéÅ2üéÅ3'.SplitFn(chr: chr == 'üéÅ')`, `['1', 'üéÅ2', 'üéÅ3']`)
	common.AssertCode(t, `'renato'.SplitFn(chr: chr == 'a')`, `['ren', 'ato']`)
	common.AssertCode(t, `'renato'.SplitFn((_, idx): idx >= 3)`, `['ren', 'a', 't', 'o']`)
}

func TestString_Fields(t *testing.T) {
	common.AssertCode(t, `'1üéÅ2üéÅ3'.Fields()`, `['1üéÅ2üéÅ3']`)
	common.AssertCode(t, `'1üéÅ   üéÅ3'.Fields()`, `['1üéÅ', 'üéÅ3']`)
	common.AssertCode(t, `'hello, world'.Fields()`, `['hello,', 'world']`)
	common.AssertCode(t, `'hello ping world'.Fields()`, `['hello', 'ping', 'world']`)
	common.AssertCode(t, `'a b c d e f g'.Fields()`, `['a', 'b', 'c', 'd', 'e', 'f', 'g']`)
	common.AssertCode(t, `'.1    1.'.Fields()`, `['.1', '1.']`)
	common.AssertCode(t, `''.Fields()`, `[]`)
}

func TestString_ToLower(t *testing.T) {
	common.AssertCode(t, `'üéÅ'.ToLower()`, `üéÅ`)
	common.AssertCode(t, `'Renato'.ToLower()`, `renato`)
	common.AssertCode(t, `'RENATO'.ToLower()`, `renato`)
	common.AssertCode(t, `'√á√Ä√É.'.ToLower()`, `√ß√†√£.`)
	common.AssertCode(t, `''.ToLower()`, ``)
}

func TestString_ToUpper(t *testing.T) {
	common.AssertCode(t, `'Renato'.ToUpper()`, `RENATO`)
	common.AssertCode(t, `'renato'.ToUpper()`, `RENATO`)
	common.AssertCode(t, `'√ß√†√£.'.ToUpper()`, `√á√Ä√É.`)
	common.AssertCode(t, `''.ToUpper()`, ``)
}

func TestString_ToTitle(t *testing.T) {
	common.AssertCode(t, `'renato pereira'.ToTitle()`, `Renato Pereira`)
	common.AssertCode(t, `'RENATO'.ToTitle()`, `Renato`)
	common.AssertCode(t, `'√ß√†√£.'.ToTitle()`, `√á√†√£.`)
	common.AssertCode(t, `''.ToTitle()`, ``)
}

func TestString_ToSnake(t *testing.T) {
	common.AssertCode(t, `'renato pereira'.ToSnake()`, `renato_pereira`)
	common.AssertCode(t, `'RENATO     Per'.ToSnake()`, `renato_per`)
	common.AssertCode(t, `'√ß√†√£.'.ToSnake()`, ``)
	common.AssertCode(t, `''.ToSnake()`, ``)
}

func TestString_ToKebab(t *testing.T) {
	common.AssertCode(t, `'renato pereira'.ToKebab()`, `renato-pereira`)
	common.AssertCode(t, `'RENATO     Per'.ToKebab()`, `renato-per`)
	common.AssertCode(t, `'√ß√†√£.'.ToKebab()`, ``)
	common.AssertCode(t, `''.ToKebab()`, ``)
}

func TestString_ToCamel(t *testing.T) {
	common.AssertCode(t, `'renato pereira'.ToCamel()`, `renatoPereira`)
	common.AssertCode(t, `'RENATO     Per'.ToCamel()`, `renatoPer`)
	common.AssertCode(t, `'√ß√†√£.'.ToCamel()`, ``)
	common.AssertCode(t, `''.ToCamel()`, ``)
}

func TestString_ToPascal(t *testing.T) {
	common.AssertCode(t, `'renato pereira'.ToPascal()`, `RenatoPereira`)
	common.AssertCode(t, `'RENATO     Per'.ToPascal()`, `RenatoPer`)
	common.AssertCode(t, `'√ß√†√£.'.ToPascal()`, ``)
	common.AssertCode(t, `''.ToPascal()`, ``)
}

func TestString_ToDot(t *testing.T) {
	common.AssertCode(t, `'renato pereira'.ToDot()`, `renato.pereira`)
	common.AssertCode(t, `'RENATO     Per'.ToDot()`, `renato.per`)
	common.AssertCode(t, `'√ß√†√£.'.ToDot()`, ``)
	common.AssertCode(t, `''.ToDot()`, ``)
}

func TestString_ToTrain(t *testing.T) {
	common.AssertCode(t, `'renato pereira'.ToTrain()`, `Renato-Pereira`)
	common.AssertCode(t, `'RENATO     Per'.ToTrain()`, `Renato-Per`)
	common.AssertCode(t, `'√ß√†√£.'.ToTrain()`, ``)
	common.AssertCode(t, `''.ToTrain()`, ``)
}

func TestString_ToSentence(t *testing.T) {
	common.AssertCode(t, `'renato pereira'.ToSentence()`, `Renato pereira`)
	common.AssertCode(t, `'RENATO     Per'.ToSentence()`, `RENATO     Per`)
	common.AssertCode(t, `'√ß√†√£.'.ToSentence()`, `√á√†√£.`)
	common.AssertCode(t, `''.ToSentence()`, ``)
}

func TestString_Ellipsis(t *testing.T) {
	common.AssertCode(t, `'renato pereira'.Ellipsis(5)`, `renat...`)
	common.AssertCode(t, `'RENATO     Per'.Ellipsis(10)`, `RENATO    ...`)
	common.AssertCode(t, `'√ß√†√£.'.Ellipsis(2)`, `√ß√†...`)
	common.AssertCode(t, `''.Ellipsis(3)`, ``)
}

func TestString_PadCenter(t *testing.T) {
	common.AssertCode(t, `'ren√°to'.PadCenter(10)`, `  ren√°to  `)
	common.AssertCode(t, `'renato'.PadCenter(5)`, `renato`)
}

func TestString_PadCenterWith(t *testing.T) {
	common.AssertCode(t, `'ren√°to'.PadCenterWith(10, '‚ö†Ô∏è')`, `‚ö†Ô∏è‚ö†Ô∏èren√°to‚ö†Ô∏è‚ö†Ô∏è`)
	common.AssertCode(t, `'renato'.PadCenterWith(5, '‚ö†Ô∏è')`, `renato`)
}

func TestString_PadLeft(t *testing.T) {
	common.AssertCode(t, `'ren√°to'.PadLeft(10)`, `    ren√°to`)
	common.AssertCode(t, `'renato'.PadLeft(5)`, `renato`)
}

func TestString_PadLeftWith(t *testing.T) {
	common.AssertCode(t, `'ren√°to'.PadLeftWith(10, '‚ö†Ô∏è')`, `‚ö†Ô∏è‚ö†Ô∏è‚ö†Ô∏è‚ö†Ô∏èren√°to`)
	common.AssertCode(t, `'renato'.PadLeftWith(5, '‚ö†Ô∏è')`, `renato`)
}

func TestString_PadRight(t *testing.T) {
	common.AssertCode(t, `'ren√°to'.PadRight(10)`, `ren√°to    `)
	common.AssertCode(t, `'renato'.PadRight(5)`, `renato`)
}

func TestString_PadRightWith(t *testing.T) {
	common.AssertCode(t, `'ren√°to'.PadRightWith(10, '‚ö†Ô∏è')`, `ren√°to‚ö†Ô∏è‚ö†Ô∏è‚ö†Ô∏è‚ö†Ô∏è`)
	common.AssertCode(t, `'renato'.PadLeftWith(5, '‚ö†Ô∏è')`, `renato`)
}

func TestString_Repeat(t *testing.T) {
	common.AssertCode(t, `'|'.Repeat(10)`, `||||||||||`)
	common.AssertCode(t, `'√Ä'.Repeat(4)`, `√Ä√Ä√Ä√Ä`)
}

func TestString_Reverse(t *testing.T) {
	common.AssertCode(t, `'√°üéÅ√†'.Reverse()`, `√†üéÅ√°`)
}

func TestString_TrimSpace(t *testing.T) {
	common.AssertCode(t, `''.TrimSpace()`, ``)
	common.AssertCode(t, `'  abc  '.TrimSpace()`, `abc`)
	common.AssertCode(t, `'  üéÅ  '.TrimSpace()`, `üéÅ`)
}

func TestString_TrimSpaceLeft(t *testing.T) {
	common.AssertCode(t, `''.TrimSpaceLeft()`, ``)
	common.AssertCode(t, `'  abc  '.TrimSpaceLeft()`, `abc  `)
	common.AssertCode(t, `'  üéÅ  '.TrimSpaceLeft()`, `üéÅ  `)
}

func TestString_TrimSpaceRight(t *testing.T) {
	common.AssertCode(t, `''.TrimSpaceRight()`, ``)
	common.AssertCode(t, `'  abc  '.TrimSpaceRight()`, `  abc`)
	common.AssertCode(t, `'  üéÅ  '.TrimSpaceRight()`, `  üéÅ`)
}

func TestString_Trim(t *testing.T) {
	common.AssertCode(t, `''.Trim(' |[]')`, ``)
	common.AssertCode(t, `' |abc]  '.Trim(' |[]')`, `abc`)
	common.AssertCode(t, `'  [üéÅ]  '.Trim(' |[]')`, `üéÅ`)
}

func TestString_TrimLeft(t *testing.T) {
	common.AssertCode(t, `''.TrimLeft(' |[]')`, ``)
	common.AssertCode(t, `' |abc]  '.TrimLeft(' |[]')`, `abc]  `)
	common.AssertCode(t, `'  [üéÅ]  '.TrimLeft(' |[]')`, `üéÅ]  `)
}

func TestString_TrimRight(t *testing.T) {
	common.AssertCode(t, `''.TrimRight(' |[]')`, ``)
	common.AssertCode(t, `' |abc]  '.TrimRight(' |[]')`, ` |abc`)
	common.AssertCode(t, `'  [üéÅ]  '.TrimRight(' |[]')`, `  [üéÅ`)
}

func TestString_Replace(t *testing.T) {
	common.AssertCode(t, `''.Replace('a', 'no')`, ``)
	common.AssertCode(t, `'a b c a'.Replace('a', 'no')`, `no b c no`)
	common.AssertCode(t, `'üéÅ,üéÅ!√ßüéÅ'.Replace('üéÅ', 'ü•∏')`, `ü•∏,ü•∏!√ßü•∏`)
}

func TestString_ReplaceN(t *testing.T) {
	common.AssertCode(t, `''.ReplaceN('a', 'no', 1)`, ``)
	common.AssertCode(t, `'a b c a'.ReplaceN('a', 'no', 1)`, `no b c a`)
	common.AssertCode(t, `'üéÅ,üéÅ!√ßüéÅ'.ReplaceN('üéÅ', 'ü•∏', 1)`, `ü•∏,üéÅ!√ßüéÅ`)
}

func TestString_Sort(t *testing.T) {
	common.AssertCode(t, `''.Sort()`, ``)
	common.AssertCode(t, `'a c b'.Sort()`, `  abc`)
	common.AssertCode(t, `'z23a√ßüéÅ'.Sort()`, `23az√ßüéÅ`)
}

func TestString_SortFn(t *testing.T) {
	common.AssertCode(t, `''.SortFn((a, b): { a <=> b })`, ``)
	common.AssertCode(t, `'a c b'.SortFn((a, b): { a <=> b })`, `  abc`)
	common.AssertCode(t, `'z23a√ßüéÅ'.SortFn((a, b): { a <=> b })`, `23az√ßüéÅ`)
}

func TestString_Contains(t *testing.T) {
	common.AssertCode(t, `''.Contains('a', 'z')`, `false`)
	common.AssertCode(t, `'a c b'.Contains('a', 'z')`, `true`)
	common.AssertCode(t, `'zoo'.Contains('a', 'z')`, `true`)
	common.AssertCode(t, `'bool'.Contains('a', 'z')`, `false`)
	common.AssertCode(t, `'bool'.Contains('üéÅ')`, `false`)
	common.AssertCode(t, `'boolüéÅ'.Contains('üéÅ')`, `true`)
	common.AssertCode(t, `'boolüéÅ'.Contains()`, `false`)
}

func TestString_ContainsChars(t *testing.T) {
	common.AssertCode(t, `''.ContainsChars('an')`, `false`)
	common.AssertCode(t, `'a c b'.ContainsChars('an')`, `true`)
	common.AssertCode(t, `'a c banana'.ContainsChars('an')`, `true`)
	common.AssertCode(t, `'z23a√ßüéÅ'.ContainsChars('üéÅüéÅ')`, `true`)
	common.AssertCode(t, `'z23a√ßüéÅüéÅasdfasd'.ContainsChars('üéÅüéÅ')`, `true`)
}

func TestString_StartsWith(t *testing.T) {
	common.AssertCode(t, `''.StartsWith('')`, `true`)
	common.AssertCode(t, `'abc'.StartsWith('')`, `true`)
	common.AssertCode(t, `''.StartsWith('a')`, `false`)
	common.AssertCode(t, `'a c b'.StartsWith('a', 'z')`, `true`)
	common.AssertCode(t, `'za c b'.StartsWith('a', 'zas')`, `false`)
	common.AssertCode(t, `'zas c b'.StartsWith('a', 'z')`, `true`)
	common.AssertCode(t, `'zas c b'.StartsWith('a', 'zas')`, `true`)
	common.AssertCode(t, `'c b'.StartsWith('a', 'z')`, `false`)
	common.AssertCode(t, `'üéÅüí°üî´üéÅüò≥'.StartsWith('üéÅüéÅ')`, `false`)
	common.AssertCode(t, `'üéÅüéÅüí°üî´üéÅüò≥'.StartsWith('üéÅüéÅ')`, `true`)
	common.AssertCode(t, `'üéÅüéÅüéÅüí°üî´üéÅüò≥'.StartsWith('üéÅüéÅ')`, `true`)
}

func TestString_EndsWith(t *testing.T) {
	common.AssertCode(t, `''.EndsWith('')`, `true`)
	common.AssertCode(t, `'abc'.EndsWith('')`, `true`)
	common.AssertCode(t, `''.EndsWith('a')`, `false`)
	common.AssertCode(t, `'a c b'.EndsWith('b', 'z')`, `true`)
	common.AssertCode(t, `'za c bal'.EndsWith('a', 'ball')`, `false`)
	common.AssertCode(t, `'zas c ball'.EndsWith('a', 'ball')`, `true`)
	common.AssertCode(t, `'c b'.EndsWith('a', 'z')`, `false`)
	common.AssertCode(t, `'üéÅüí°üî´üéÅüò≥'.EndsWith('üéÅüò≥')`, `true`)
	common.AssertCode(t, `'üéÅüéÅüí°üî´üéÅüò≥üò≥'.EndsWith('üéÅüò≥')`, `false`)
	common.AssertCode(t, `'üéÅüéÅüéÅüí°üî´üéÅüò≥üéÅ'.EndsWith('üéÅüò≥')`, `false`)
}

func TestString_IsEmpty(t *testing.T) {
	common.AssertCode(t, `''.IsEmpty()`, `true`)
	common.AssertCode(t, `'zas c ball'.IsEmpty()`, `false`)
	common.AssertCode(t, `'üí°üî´üéÅüò≥'.IsEmpty()`, `false`)
}

func TestString_Chars(t *testing.T) {
	common.AssertCode(t, `
	str := 'renato'

	result := ''
	calls := 0
	for c in str.Chars() {
		calls += 1
		result += c
	}
	
	[calls, result]
	`, `[6, 'renato']`)

	common.AssertCode(t, `
	str := 'renato'

	result := ''
	calls := 0
	for c in str {
		calls += 1
		result += c
	}
	
	[calls, result]
	`, `[6, 'renato']`)
}

func TestString_Lines(t *testing.T) {
	common.AssertCode(t, `
	str := '\nthis\nis\nlines\n'

	result := ''
	calls := 0
	for c in str.Lines() {
		calls += 1
		result += c
	}
	
	[calls, result]
	`, `[5, 'thisislines']`)
}

func TestString_Words(t *testing.T) {
	common.AssertCode(t, `
	str := 'this, is       a word!'

	result := ''
	calls := 0
	for c in str.Words() {
		calls += 1
		result += c
	}
	
	[calls, result]
	`, `[4, 'this,isaword!']`)
}
