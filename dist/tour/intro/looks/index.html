<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>PIPE Lang</title>
	<link rel="stylesheet" href="/css/normalize.css">
<link rel="stylesheet" href="https://unpkg.com/chota@latest">

<link rel="stylesheet" href="/css/constants.css">
<link rel="stylesheet" href="/css/style.css">
<link rel="stylesheet" href="/css/header.css">
<link rel="stylesheet" href="/css/index.css">
</head>

<body>
	<main>
		<section class="top-tour">
	<nav class="is-vertical-align">
		<span class="title">
			<a href="/">PIPE</a>
		</span>
		<span class="spacing"></span>
		<span class="btn">
			<a href="#">Docs</a> |
		</span>
		<span class="btn">
			<a href="/tour/intro/hello">Tour</a> |
		</span>
		<span class="btn">
			<a href="/play">Play</a> |
		</span>
		<span class="btn">
			<a href="#">Code</a>
		</span>
	</nav>
</section>

<style>
	.top-tour {
		background-color: var(--bg-color-4);
		text-align: left;
		 
	}

	.top-tour nav {
		display: flex;
		height: var(--top-tour-height);
		padding: 0 1rem;
	}

	.top-tour nav .spacing {
		flex: 1;
	}

	.top-tour nav .title {
		font-weight: bold;
	}

	.top-tour nav .btn a {
		display: inline-block;
		padding: 0 1rem;
	}
</style>


		<section class="tour">
			<div class="tour-content">
				<p>looks :)</p>

			</div>
			<div class="tour-code">
				<div id="editor" class="tour-code-editor">abcdef</div>
				<div id="editor-results" class="tour-code-results"></div>
			</div>
		</section>

		<div class="tour-footer">
			<a href="/tour/intro/hello">Previous</a> | <a href="/tour/toc">Content</a> | <a href="/tour/types/checking">Next</a>
		</div>
	</main>
</body>


<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Martian+Mono:wght@100..800&display=swap" rel="stylesheet">

<style>
	html,
	body,
	main {
		height: 100%;
		background-color: var(--bg-color-5);
		color: var(--color-text-light);
	}

	section.tour {
		display: flex;
	}

	section.tour,
	.tour-content,
	.tour-code {
		flex: 1;
		max-height: calc(100% - 40px);
		text-align: left;
	}

	.tour-content,
	.tour-code {
		max-width: 50%;
	}

	.tour-content {
		overflow: auto;
		padding: 1rem;
	}

	.tour-footer {
		position: absolute;
		bottom: 0;
		left: 0;
		right: 50%;
	}

	.tour-code {
		display: flex;
		flex-direction: column;
	}

	.tour-code-editor {
		flex: 4;
	}

	.tour-code-results {
		flex: 3;
		padding: 1rem;
		font-size: 0.8rem;
		font-family: 'Martian Mono', monospace;
	}

	#editor {
		resize: vertical;
		overflow: auto;
	}

	 
	::-webkit-scrollbar {
		width: 4px;
	}

	 
	::-webkit-scrollbar-track {
		background: rgba(0, 0, 0, 0.1);
	}

	 
	::-webkit-scrollbar-thumb {
		background: rgba(255, 255, 255, 0.5);
	}

	 
	::-webkit-scrollbar-thumb:hover {
		background: rgba(255, 255, 255, 0.7);
	}
</style>

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Josefin+Sans:ital,wght@0,100..700;1,100..700&display=swap"
	rel="stylesheet">
<style>

</style>

<script src="https://code.jquery.com/jquery-3.7.1.min.js"
	integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link
	href="https://fonts.googleapis.com/css2?family=Martian+Mono:wght@100..800&family=Space+Mono:ital,wght@0,400;0,700;1,400;1,700&display=swap"
	rel="stylesheet">
<script src="/js/wasm.js"></script>

<link rel="stylesheet" data-name="vs/editor/editor.main"
	href="https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.48.0/min/vs/editor/editor.main.min.css">
<script>var require = { paths: { 'vs': 'https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.48.0/min/vs' } }</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.48.0/min/vs/loader.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.48.0/min/vs/editor/editor.main.nls.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.48.0/min/vs/editor/editor.main.js"></script>

<style>
	#editor {
		height: 100%;
		min-height: 300px;
	}

	.monaco-editor {
		outline-color: var(--vscode-editor-background);
	}

	.monaco-editor-background {
		margin-top: 1rem;
	}
</style>

<script>
	$(function () {
		const ed = document.getElementById('editor')
		const ct = ed.innerHTML

		ed.innerHTML = ''
		const editor = monaco.editor.create(document.getElementById('editor'), {
			value: ct,
			language: 'haskell',
			theme: 'vs-dark',
			automaticLayout: true,
			lineNumbers: "off",
			minimap: {
				enabled: false
			},
		});

		const go = new Go();
		WebAssembly.instantiateStreaming(fetch("/js/pipe.wasm"), go.importObject).then((result) => {
			go.run(result.instance);
			update();
		});

		function update() {
			const code = editor.getValue()
			if (code == "") {
				rs.innerHTML = ""
				return
			}

			const res = pipe_eval(code)
			rs.innerHTML = res.replace(/\n/g, '<br>')
		}

		const rs = document.getElementById('editor-results')
		editor.getModel().onDidChangeContent((event) => { update() });
	});
</script>

</html>